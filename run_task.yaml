
trigger:
  branches:
    include:
      - main
 
stages:
  - stage: ValidateFileGenerated
    displayName: 'Validate if file is generated'
    jobs:
      - job: CheckFile
        pool:
          vmImage: 'ubuntu-latest'
        steps:
          - script: echo "‚úÖ Validate if file is generated"
            displayName: 'Check if file exists'
 
  - stage: DebugMissingFile
    displayName: 'Validate why file is not generated by going through logs'
    dependsOn: ValidateFileGenerated
    jobs:
      - job: DebugFileMissing
        pool:
          vmImage: 'ubuntu-latest'
        steps:
          - script: echo "üîç Validate why file is not generated by going through logs"
            displayName: 'Analyze logs for missing file'
 
  - stage: TriggerFileGeneration
    displayName: 'Trigger job to generate the file'
    dependsOn: DebugMissingFile
    jobs:
      - job: TriggerJob
        pool:
          vmImage: 'ubuntu-latest'
        steps:
          - script: echo "üöÄ Trigger job to generate the file"
            displayName: 'Run file generation job'
 
  - stage: ValidateFileAgain
    displayName: 'Validate if file generated'
    dependsOn: TriggerFileGeneration
    jobs:
      - job: ValidateFile
        pool:
          vmImage: 'ubuntu-latest'
        steps:
          - script: echo "‚úÖ Validate if file generated"
            displayName: 'Re-check if file exists'
 
